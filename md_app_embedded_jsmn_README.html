<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Teonet library: JSMN</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Teonet library
   &#160;<span id="projectnumber">0.4.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_app_embedded_jsmn_README.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">JSMN </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/zserge/jsmn">![Build Status](https://travis-ci.org/zserge/jsmn.svg?branch=master)</a></p>
<p>jsmn (pronounced like 'jasmine') is a minimalistic JSON parser in C. It can be easily integrated into resource-limited or embedded projects.</p>
<p>You can find more information about JSON format at <a href="http://www.json.org/">json.org</a></p>
<p>Library sources are available at <a href="https://github.com/zserge/jsmn">https://github.com/zserge/jsmn</a></p>
<p>The web page with some information about jsmn can be found at <a href="http://zserge.com/jsmn.html">http://zserge.com/jsmn.html</a></p>
<h2>Philosophy </h2>
<p>Most JSON parsers offer you a bunch of functions to load JSON data, parse it and extract any value by its name. jsmn proves that checking the correctness of every JSON packet or allocating temporary objects to store parsed JSON fields often is an overkill.</p>
<p>JSON format itself is extremely simple, so why should we complicate it?</p>
<p>jsmn is designed to be <b>robust</b> (it should work fine even with erroneous data), <b>fast</b> (it should parse data on the fly), <b>portable</b> (no superfluous dependencies or non-standard C extensions). And of course, <b>simplicity</b> is a key feature - simple code style, simple algorithm, simple integration into other projects.</p>
<h2>Features </h2>
<ul>
<li>compatible with C89</li>
<li>no dependencies (even libc!)</li>
<li>highly portable (tested on x86/amd64, ARM, AVR)</li>
<li>about 200 lines of code</li>
<li>extremely small code footprint</li>
<li>API contains only 2 functions</li>
<li>no dynamic memory allocation</li>
<li>incremental single-pass parsing</li>
<li>library code is covered with unit-tests</li>
</ul>
<h2>Design </h2>
<p>The rudimentary jsmn object is a <b>token</b>. Let's consider a JSON string: </p>
<pre class="fragment">    '{ "name" : "Jack", "age" : 27 }'
</pre><p>It holds the following tokens:</p>
<ul>
<li>Object: <code>{ "name" : "Jack", "age" : 27}</code> (the whole object)</li>
<li>Strings: <code>"name"</code>, <code>"Jack"</code>, <code>"age"</code> (keys and some values)</li>
<li>Number: <code>27</code></li>
</ul>
<p>In jsmn, tokens do not hold any data, but point to token boundaries in JSON string instead. In the example above jsmn will create tokens like: Object [0..31], String [3..7], String [12..16], String [20..23], Number [27..29].</p>
<p>Every jsmn token has a type, which indicates the type of corresponding JSON token. jsmn supports the following token types:</p>
<ul>
<li>Object - a container of key-value pairs, e.g.: <code>{ "foo":"bar", "x":0.3 }</code></li>
<li>Array - a sequence of values, e.g.: <code>[ 1, 2, 3 ]</code></li>
<li>String - a quoted sequence of chars, e.g.: <code>"foo"</code></li>
<li>Primitive - a number, a boolean (<code>true</code>, <code>false</code>) or <code>null</code></li>
</ul>
<p>Besides start/end positions, jsmn tokens for complex types (like arrays or objects) also contain a number of child items, so you can easily follow object hierarchy.</p>
<p>This approach provides enough information for parsing any JSON data and makes it possible to use zero-copy techniques.</p>
<h2>Install </h2>
<p>To clone the repository you should have Git installed. Just run: </p>
<pre class="fragment">    $ git clone https://github.com/zserge/jsmn
</pre><p>Repository layout is simple: <a class="el" href="jsmn_8c.html">jsmn.c</a> and <a class="el" href="jsmn_8h.html">jsmn.h</a> are library files, tests are in the jsmn_test.c, you will also find README, LICENSE and Makefile files inside.</p>
<p>To build the library, run <code>make</code>. It is also recommended to run <code>make test</code>. Let me know, if some tests fail.</p>
<p>If build was successful, you should get a <code>libjsmn.a</code> library. The header file you should include is called <code>"jsmn.h"</code>.</p>
<h2>API </h2>
<p>Token types are described by <code>jsmntype_t</code>: </p>
<pre class="fragment">    typedef enum {
            JSMN_UNDEFINED = 0,
            JSMN_OBJECT = 1,
            JSMN_ARRAY = 2,
            JSMN_STRING = 3,
            JSMN_PRIMITIVE = 4
    } jsmntype_t;
</pre><p><b>Note:</b> Unlike JSON data types, primitive tokens are not divided into numbers, booleans and null, because one can easily tell the type using the first character:</p>
<ul>
<li><code>'t', 'f'</code> - boolean</li>
<li><code>'n'</code> - null</li>
<li><code>'-', '0'..'9'</code> - number</li>
</ul>
<p>Token is an object of <code><a class="el" href="structjsmntok__t.html" title="JSON token description. ">jsmntok_t</a></code> type: </p>
<pre class="fragment">    typedef struct {
            jsmntype_t type; // Token type
            int start;       // Token start position
            int end;         // Token end position
            int size;        // Number of child (nested) tokens
    } jsmntok_t;
</pre><p><b>Note:</b> string tokens point to the first character after the opening quote and the previous symbol before final quote. This was made to simplify string extraction from JSON data.</p>
<p>All job is done by <code><a class="el" href="structjsmn__parser.html" title="JSON parser. ">jsmn_parser</a></code> object. You can initialize a new parser using: </p>
<pre class="fragment">    jsmn_parser parser;
    jsmntok_t tokens[10];

    jsmn_init(&amp;parser);

    // js - pointer to JSON string
    // tokens - an array of tokens available
    // 10 - number of tokens available
    jsmn_parse(&amp;parser, js, strlen(js), tokens, 10);
</pre><p>This will create a parser, and then it tries to parse up to 10 JSON tokens from the <code>js</code> string.</p>
<p>A non-negative return value of <code>jsmn_parse</code> is the number of tokens actually used by the parser. Passing NULL instead of the tokens array would not store parsing results, but instead the function will return the value of tokens needed to parse the given string. This can be useful if you don't know yet how many tokens to allocate.</p>
<p>If something goes wrong, you will get an error. Error will be one of these:</p>
<ul>
<li><code>JSMN_ERROR_INVAL</code> - bad token, JSON string is corrupted</li>
<li><code>JSMN_ERROR_NOMEM</code> - not enough tokens, JSON string is too large</li>
<li><code>JSMN_ERROR_PART</code> - JSON string is too short, expecting more JSON data</li>
</ul>
<p>If you get <code>JSMN_ERROR_NOMEM</code>, you can re-allocate more tokens and call <code>jsmn_parse</code> once more. If you read json data from the stream, you can periodically call <code>jsmn_parse</code> and check if return value is <code>JSMN_ERROR_PART</code>. You will get this error until you reach the end of JSON data.</p>
<h2>Other info </h2>
<p>This software is distributed under <a href="http://www.opensource.org/licenses/mit-license.php">MIT license</a>, so feel free to integrate it in your commercial products. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Dec 4 2020 10:27:32 for Teonet library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
